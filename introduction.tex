% -*- root: article.tex -*-
% \lettrine[nindent=0em,lines=3]{L}orem ipsim ult as 
Escrever código com qualidade tem se tornado cada vez mais importante com o aumento da complexidade da tecnologia. Existem diferentes técnicas que auxiliam os desenvolvedores a escrever código com qualidade incluindo \textit{design patterns}\mau{cite gof} e cheiros de código\mau{cite beck e fowler}. A falta de qualidade pode resultar em defeitos de software que podem custar a empresas quantias significativas, especialmente quando conduzem a falhas de software \cite{Nagappan:2005, briand1993modeling}. Evolução e manutenção de software também já se provaram como os maiores gastos com aplicações \cite{RefactoringAndImprovements:10}.

Uma das formas de aumentar a qualidade de software é identificar trechos de códigos ruins e refatorá-los, ou seja, alterar o código sem alterar o comportamento \cite{Refactoring:99}. Com base nisso, temos que cheiros de código desempenham um importante papel na busca por qualidade de código, pois eles são sintomas que podem indicar problemas mais profundos no software, mas não necessariamente são o problema em si \cite{CodeSmell:06}. Seu mapeamento possibilita a definição de heurísticas que, por sua vez, possibilitam a implementação de ferramentas que os identificam de modo automático no código. PMD \cite{PMD2016}, Checkstyle e FindBugs são exemplos de ferramentas que identificam automaticamente alguns tipos de cheiros de código em códigos Java.

Determinar o que é ou não um cheiros de código é subjetivo e pode variar de acordo com tecnologia, desenvolvedor, metodologia de desenvolvimento dentre outros aspectos \cite{WikiCodeSmell}. Em particular, Aniche et al. \cite{MvcSmells:16,aniche2016satt} mostraram que a arquitetura do software é um fator importante e que deve ser levado em conta ao analisar a qualidade de um sistema.   Alguns estudos têm buscado por cheiros de código tradicionais em projetos Android. Por exemplo, Verloop \cite{MobileSmells:13} analisou se classes derivadas do SDK Android são mais ou menos propensas a cheiros de código tradicionais do que classes puramente Java. Linares et al. \cite{DomainMatters} usaram o método DECOR para realizar a detecção de 18 \textit{anti-patterns} orientado a objetos em aplicativos móveis. Outros estudos identificaram cheiros de código específicos Android relacionados ao consumo inteligente de recursos do dispositivo, como bateria e memória, usabilidade, dentre outros \cite{EnergyAndroidSmells, ReimannBrylski2013}. 

Nossa pesquisa complementa as anteriores no sentido de que também buscamos cheiros de código Android, e se difere delas pois estamos buscando cheiros de código relacionados à qualidade do código Android, ou seja, qualidade relacionada a códigos específicos dessa plataforma. Por exemplo \textsc{Activities}\mau{plural de activity é activies, arrumei aqui, arrume nos outros lugares}, \textsc{Fragments} e \textsc{Adapters} são classes usadas na construção de telas e \textsc{listeners} são responsáveis pelas interações com os usuários. Buscamos entender, por exemplo, \textit{``quais são as \textbf{boas e más} práticas ao lidar com \textsc{Activitys}, \textsc{Fragments}, \textsc{Adapters} e \textsc{listeners}''} ou \textit{``quais são as \textbf{boas e más} práticas para a construção da interface visual''}. 

Optamos por focar em cheiros de código relacionados ao \textit{front-end} Android pois encontramos pesquisas com abordagem similar, porém relacionadas ao \textit{front-end} de tecnologias web \cite{CSSCodeSmell, BB, FinavaroAniche2016}. E enquanto que cheiros de código em projetos Java já foram extensivamente estudados \cite{Riel, Refactoring:99, Martin:2008:CCH:1388398}, o \textit{front-end} Android ainda carece de estudo e possui peculiaridades não encontradas em código Java tradicional \cite{Mannan_Dig_Ahmed_Jensen_Abdullah_Almurshed}. Alguns exemplos dessas peculiaridas são o ciclo de vida de \textsc{Activitys} e \textsc{Fragments} e a criação da interface visual que é feita através de arquivos XML chamados de \textsc{layout resources}.

Para definirmos quais elementos representam o \textit{front-end} Android, fizemos uma extensa revisão da documentação oficial \cite{AndroidDeveloperSite2016} e chegamos nos seguintes itens: \textsc{Activitys}, \textsc{Fragments}, \textsc{Listeners}, \textsc{Adapters} e os recursos do aplicativo, que são arquivos XML ou imagens utilizados na interface visual como por exemplo \textsc{Drawables}, \textsc{Layouts}, \textsc{Styles} e \textsc{Colors}. Como existem muitos tipos de recursos do aplicativo \cite{AndroidResourcesOverview}, com o objetivo de limitar o tamanho do questionário e foco da pesquisa, selecionamos quatro: \textsc{Layout}, \textsc{Styles}, \textsc{String} e \textsc{Drawable}. Optamos por esses recursos pois os mesmos estão presentes no template padrão do Android Studio \cite{FirstApp2017}, IDE oficial para desenvolvimento de projetos da plataforma Android \cite{AndroidStudio}. 

Para obter os dados iniciais, publicamos um questionário online com perguntas sobre boas e más práticas no desenvolvimento do \textit{front-end} Android. Para possibilitar respostas mais completas foram usadas perguntas dissertativas. Com isso, pretendemos responder as seguintes questões de pesquisa: \\

\textbf{RQ1} O que desenvolvedores consideram boas e más práticas no desenvolvimento Android? \\

\textbf{RQ2} Códigos afetados por estas más práticas são percebidos pelos desenvolvedores como problemáticos? \\

\mau{pode manter esse parágrafo aqui sim, quando estiver pronto} \textcolor{red}{Com os resultados obtidos foi possível compilar um catálogo com 21 Android cheiros de código classificados em alta, média e baixa recorrência de percepção. Esperamos com este catálogo contribuir com as ideias iniciais para a definição de heurísticas para a detecção sistematizada desses \textit{smells}.}

As contribuições deste trabalho são\mau{melhorar aqui}:

\begin{enumerate}

	\item Relação de maus cheiros de código na camada
	de \textit{front-end} em aplicações Android, derivada após
	entrevistas com \textcolor{red}{XX} desenvolvedores.

	\item Experimento controlado com \textcolor{red}{XX} 
	desenvolvedores demonstrando \textcolor{red}{bla bla bla}.

	\item Roteiro de entrevista para que outros pesquisadores
	possam replicar nosso estudo.
\end{enumerate}

As seções seguintes deste artigo estão organizadas da seguinte forma: na Seção 2 discutimos trabalhos relacionados e o estado da arte sobre Android e cheiros de código. Na Seção 3 falamos sobre a metodologia de pesquisa utilizada. A Seção 4 apresenta os resultados obtidos. Na Seção 5 discutimos os resultados. Na Seção 6 tratamos das ameaças à validade do nosso estudo e então, na Seção 7 concluímos.
